
{% extends "base.html" %}

{% block title %}Events{% endblock %}

{% block content %}
<h1>Campus Events</h1>

{% if current_user.is_authenticated %}
<div class="create-event">
    <h2>Create New Event</h2>
    <form method="POST" action="{{ url_for('create_event') }}">
        <label for="title">Title:</label>
        <input type="text" id="title" name="title" required>

        <label for="description">Description:</label>
        <textarea id="description" name="description" required></textarea>

        <label for="date">Date:</label>
        <input type="datetime-local" id="date" name="date" required>

        <label for="location">Location:</label>
        <input type="text" id="location" name="location" required>

        <button type="submit">Create Event</button>
    </form>
</div>
{% endif %}

<div class="events-list">
    {% for event in events %}
    <div class="event">
        <h3>{{ event.title }}</h3>
        <p>{{ event.description }}</p>
        <p><strong>Date:</strong> {{ event.date.strftime('%Y-%m-%d %H:%M') }}</p>
        <p><strong>Location:</strong> {{ event.location }}</p>
        <p><strong>Organizer:</strong> {{ event.organizer.name }}</p>
        {% if current_user.is_authenticated %}
        <form method="POST" action="{{ url_for('rsvp_event', event_id=event.id) }}">
            <button type="submit">{% if current_user in event.attendees %}Cancel RSVP{% else %}RSVP{% endif %}</button>
        </form>
        {% endif %}
    </div>
    {% else %}
    <p>No events scheduled yet.</p>
    {% endfor %}
</div>

<div class="calendar-view">
    <h2>Calendar View</h2>
    <!-- Add a simple calendar view here -->
    <table class="calendar">
        <thead>
            <tr>
                <th>Sun</th>
                <th>Mon</th>
                <th>Tue</th>
                <th>Wed</th>
                <th>Thu</th>
                <th>Fri</th>
                <th>Sat</th>
            </tr>
        </thead>
        <tbody>
            <!-- Add calendar rows here -->
        </tbody>
    </table>
</div>
{% endblock %}
